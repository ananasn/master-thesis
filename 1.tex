 \def\figureautorefname{рис.}
\chapter[Обзор состояния вопроса и постановка задачи\\ исследования]{Обзор состояния вопроса и постановка задачи исследования}
\section{Степень изученности темы исследования}
В последнее десятилетие стали активно проводиться работы по переходу к цифровому производству и интеллектуализации. Разработчики стремятся, чтобы вещи, которыми раньше управляли в ручную или с помощью жестких автоматических систем, получали доступ в сеть и сами договаривались о выполняемых работах. Технологическое оборудование является одной из ключевых и дорогостоящих частей производства, и для того, чтобы интегрировать его в обновленную производственную и технологическую среду, необходимо произвести обширные как научные, так и инженерные исследования.

Например, исследователи из университета Керетаро (Autonomous University of Queretaro) и университета Гуанахуато (University of Guanajuato) в Мексике работают над созданием мультиагентной платформы для управления технологическим оборудованием \cite{MoralesVelazquez2010407}. Данная система называется MADCON\footnote{MADCON --- Multi-Agent Distributed Controller} и представляет собой платформу с открытой архитектурой, основанную на мультиагентных программно-аппаратных модулях. Цель разработчиков -- создание такой платформы, которая бы удовлетворяла требованиям реконфигурируемости для интеллектуальных машин следующего поколения. Аппаратные модули данной системы базируются на программируемых вентильных матрицах (ППВМ), также известных как FPGA, а программные модули используют XML для описания функций системы и графического интерфейса.

Аналогичные работы проводятся и в России. Например, ученые из Московского государственного технологический университет <<СТАНКИН>> предлагают подход к построению переносимого ядра ЧПУ на основе платформы независимых библиотек \cite{Grigoriev2014517}. Открытая архитектура данной системы ЧПУ включает в себя уровни абстракции для реализации различных человеко-машинных интерфейсов, а также имеет возможность описания компонентов системы на различных языках программирования. 

Компоненты системы связываются между собой по протоколам семейства Fieldbus\footnote{Fieldbus -- семейство  протоколов помышленных сетей, используемых для распределенного контроля в реальном времени, описывается стандартом IEC 61158 \cite{IEC61158}}, например, SERCOS \cite{IEC61800, IEC61784}, EtherCAT \cite{ISO15745}, CAN-bus \cite{ISO11898}, Modbus~\cite{Modbus} и т.д.
Более того, специалисты университета самостоятельно разработали часть программно-аппаратных компонентов. Человеко-машинный интерфейс в данной системе обеспечивается тремя видами взаимодействия: с использованием физической стойки управления, удаленного устройства управления и веб-терминала, доступного с любого устройства с выходом в сеть.

В других странах также ведутся работы в этом направлении. В Хуажжунском университете науки и технологии (Huazhong University of Science and Technology) в Китае разрабатывают платформу для создания открытых ЧПУ систем \cite{Bin200473}. Основными её задачами является упрощение и сопровождение разработки переиспользуемых модулей и интеграция их в прикладную систему управления. Кроме того, данная платформа включает инструменты моделирования и тестирования получаемых систем.

Кроме исследований, непосредственно связанных с созданием компонентов цифровых и интеллектуальных производств, ведутся работы по стандартизации. И лидирующую роль в этом вопросе занимают Германия и США. Немецкие специалисты разработали моножество документов и стандартов, связанных с цифровым производством \cite{IEC62541, IEC61987, DIN40912}. Основным является документ, посвященный эталонной архитектурной модели, также известной как RAMI 4.0 (Reference Architectural Model Industry 4.0) \cite{DIN91345}. 

Параллельно в США были проведены аналогичные работы, однако стандарт был назван Industrial Internet Reference Architecture (IIRA) \cite{IIRA}.
\section[Модульные системы управления технологическим оборудо-\\ванием и их основные принципы]{\mbox{Модульные системы управления технологическим} оборудованием и их основные принципы}
Современные системы управления отличаются комплексностью и монолитностью. Каждый их элемент – это <<вещь в себе>> с жёсткой и иерархической архитектурой. Всё в подобных системах направлено на обеспечение качества, надежности и бесперебойной работы. Инертность подобных систем заставляет разработчиков АСУ ТП следовать этому же принципу монолитности, потому что оборудование с централизованным управлением нельзя эффективно внедрить в децентрализованную производственную среду.

Вследствие этого, упор делается на интеграцию, то есть на объединение разрозненных компонентов в единую производственную систему, а не на интероперабельность – создание открытого интерфейса взаимодействия, позволяющего отдельным компонентам оставаться автономными, но способными общаться с другими компонентами в случае необходимости. Соответственно, желательно переходить к разработке оборудования с модульной архитектурой.

Подобная архитектура базируется на двух основных постулатах: 
\begin{enumerate}
\item \textit{\textbf{ Унификация}}. Под унификацией понимается открытая программно-аппаратная структура, позволяющая создавать новые типы оборудования и программного обеспечения по принципу <<интеллектуального конструктора>>.  Унификация достигается за счет разбиения единого изделия на крупные взаимозаменяемые блоки с четким описанием входных и выходных параметров каждого блока.
\item \textit{\textbf{Гибридизация}}. Позволяет создавать установки, являющиеся совокупностью уже существующих. Например, можно сконфигурировать аддитивно-субстрактивную машину для быстрого прототипирования, сочетающую в себе характеристики 3D-принтера и трехкоординатного фрезерного станка или совместить фрезерную головку для черновой обработки заготовок с лазером для полирования определенных поверхностей.
\end{enumerate}

Применяя данные принципы, в первую очередь необходимо выделить основные части технологического оборудования:
\begin{itemize}
\item рабочий орган;
\item координатное шасси, перемещающее рабочий орган в пространстве;
\item блок числового программного управления.
\end{itemize}

Очевидно, что координатное шасси является наиболее универсальным блоком, на который могут быть установлены различные рабочие органы, за счет чего может быть изменен тип оборудования. Например, сменив фрезерную головку на лазерную, можно сделать из фрезерного станка гравировальный или форматно-раскроечный, а поставив экструдер для пластика -- 3D-принтер.

Однако не стоит забывать о том, что смена рабочего органа –- это не только механическое изменение параметров оборудования, но и смена алгоритма управления. Блок числового программного управления должен заранее знать о каждом рабочем органе, который может быть установлен на шасси. Очевидно, что при таком подходе система остается монолитной  с иерархическим управлением. Поэтому необходимо выделить базовую часть архитектуры, определить спецификацию протокола взаимодействия и создания новых программно-аппаратных модулей, которые могут быть динамически включены в систему. К базовой части  относится алгоритм управления электрическими приводами координатного шасси, а все остальное является внешними компонентами.

Подобный подход полностью изменяет стиль управления производственной средой, позволяя добиться бесшовного объединения различных производственных установок в единую сеть.
\section{Микросервисный подход}
Сервис-ориентированная архитектура\footnote{В англоязычной литературе обозначается как Service-oriented architecture~(SOA)} является быстро развивающейся концепцией, все чаще используемой для реализации распределенных программных систем. Основа подобной архитектуры -- набор слабо связанных заменяемых компонентов, оснащенных унифицированными интерфейсами для взаимодействия по стандартизированным протоколам. Первые упоминания о концепции SOA можно встретить в литературе начиная с 2009 года \cite{SOA, SOAManifesto}.

Микросервисная архитектура\footnote{В англоязычной литературе обозначается как Microservices architecture~(MSA)} является современной интерпретацией SOA (первые упоминания об MSA относятся к 2012 году, хотя этот термин употреблялся и ранее), используемой для создания децентрализованного программного обеспечения~\cite{MSA}. В данной архитектуре под сервисом понимается процесс, выполняемый операционной системой, который взаимодействует с другими процессами по сетевому интерфейсу для достижения общей цели. Микросервисы могут быть построены с применением любого языка или фреймворка, но должны использовать общий протокол, который позволяет скрыть особенности реализации  каждого из микросервисов. При этом каждый микросервис работает лишь с небольшой, максимально ограниченной областью задач, выполняя минимум функций.

На сегодняшний день не существует четкого определения MSA. Тем не менее, из всего многообразия встречающихся в литературе формулировок попытаемся выделить те особенности данного подхода, которые особенно важны при проектировании распределенных систем ЧПУ:
\begin{enumerate}
\item {\it Архитектура микросервисов позволяет легко заменять модули, входящие в состав системы.} В качестве примера можно представить человеко-машинный интерфейс для взаимодействия с оборудованием. Классический интерфейс – это набор физических элементов управления: индикаторов, кнопок, переключателей и т.д. Подобный интерфейс очень удобен в массовом производстве, когда оборудование используется в составе конвейерной линии. Однако в условиях промышленной лаборатории (FabLab), подобный физический способ взаимодействия может быть избыточным. Использование микросервисного подхода дает возможность легко заменить физическое устройство управления на виртуальное, что позволит управлять оборудованием, например, через веб-интерфейс с любого устройства, подключенного к сети.

\item {\it Все модули организованы вокруг функций.} Архитектура микросервисов позволяет разделять функционал каждого блока. Рассмотрим в качестве примера фрезерную головку. Данный модуль состоит из физической части: двигатель, патрон, контроллер, датчики и логической – модуль управления. Физически обе части расположены в едином блоке. Но с точки зрения архитектуры – это два разных сервиса. Один из них отвечает за низкоуровневые команды управления приводом головки, сбором данных от датчиков и~т.д.~А~другой~--~это высокоуровневый интерфейс пользователя, который может включать в себя доступ к элементам управления, заданием технологических параметров, и даже включать в себя систему подготовки управляющих программ, нацеленных именно на фрезерную обработку. Каждый из них отвечает строго за свою функцию системы и ничего не знает о реализации других микросервисов.

\item {\it Каждый микросервис является эластичным, легко модифицируемым, но при этом законченным программным продуктом.} Данное утверждение подразумевает, что при разработке системы ЧПУ необходимо придерживаться принципа увеличения связности  и уменьшения связанности. Это позволяет с одной стороны сфокусироваться на разработке и отладке каждого отдельного блока, а с другой~--~дает возможность упростить методику добавления и модификации функций системы в целом.
\end{enumerate}

Микросервисная архитектура является современным и быстроразвивающимся направлением развития кибер-физических производственных систем и может быть успешно использована для создания распределенных систем ЧПУ.
\section{Выводы к первой главе}
\begin{enumerate}
\item Проведенные исследования показали, что предметная область активно развивается в направлении повсеместного внедрения информационных и коммуникационных технологий, что сопровождается увеличением автономности и независимости компонентов. Это влечет за собой изменение парадигмы управления как производством в целом, так и отдельно взятыми компонентами, в сторону модульности. А соответсвенно, данное высказывание справедливо и для систем управления технологическим оборудованием. 
\item Основной проблемой систем управления технологическим оборудованием является монолитность их архитектуры. Для реализации современной системы управления технологическим оборудованием, требуется делать упор на интероперабельность~--~создание открытого интерфейса взаимодействия.
\item Проведя исследование микросервисного подхода, можно сделать вывод, что данный подход применим к системам ЧПУ, и соответствует тенденциям развития промышленности, обусловленным четвёртой промышленной революцией.
\end{enumerate}